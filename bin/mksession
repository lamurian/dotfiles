#!/bin/bash
# Script to set-up tmux layout

# Use def as default session name if no argument is given
[ -z $1 ] && SES="def" || SES=$1

# Check if session is already running
tmux has-session -t $SES &> /dev/null

# Condition when session is not running
if [ $? != 0 ]; then

	# Make new session and detach it
	tmux new-session -d -s $SES -n man

	# Configure "man" window
	tmux split-window -t $SES:0 -h -p 70	# 3:7 H
	tmux split-window -t $SES:0 -h -p 50 	# 3.5:3.5 H
	tmux split-window -t $SES:0 -v -p 50	# 1:1 V
	tmux select-pane -t 0
	tmux split-window -t $SES:0 -v -p 30	# 1:1 V

	# Make the next window
	tmux new-window -t $SES -n net
	
	# Configure "net" window
	tmux split-window -t $SES:1 -h -p 70	# 3:7 H
	tmux split-window -t $SES:1 -h -p 50 	# 3.5:3.5 H
	tmux split-window -t $SES:1 -v -p 50	# 1:1 V

	# Move to default window and pane
	tmux select-window -t $SES:0
	tmux select-pane -t 0

fi

# Check if $DISPLAY is null -> use tty conf
[ -z $DISPLAY ] && \
	tmux source .tmux.tty.conf || \
	tmux source .tmux.xorg.conf

tmux a -t $SES
